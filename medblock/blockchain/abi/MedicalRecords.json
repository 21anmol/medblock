{
  "abi": [
    {
      "inputs": [],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "provider",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "accessLevel",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "expiry",
          "type": "uint256"
        }
      ],
      "name": "AccessGranted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "provider",
          "type": "address"
        }
      ],
      "name": "AccessRevoked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "recordId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "recordType",
          "type": "string"
        }
      ],
      "name": "MedicalRecordAdded",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "patientAddress",
          "type": "address"
        }
      ],
      "name": "PatientAdded",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "admin",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "patientAddress",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "encryptedName",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "encryptedDOB",
          "type": "string"
        }
      ],
      "name": "addPatient",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "recordId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "recordType",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "encryptedData",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "timestamp",
          "type": "string"
        }
      ],
      "name": "addMedicalRecord",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "provider",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        }
      ],
      "name": "checkAccess",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        },
        {
          "internalType": "uint8",
          "name": "",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "recordId",
          "type": "string"
        }
      ],
      "name": "getMedicalRecord",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "provider",
          "type": "address"
        },
        {
          "internalType": "uint8",
          "name": "accessLevel",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "expiry",
          "type": "uint256"
        }
      ],
      "name": "grantAccess",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "patientId",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "provider",
          "type": "address"
        }
      ],
      "name": "revokeAccess",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555061153e806100606000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c80638da5cb5b1161005b5780638da5cb5b146101035780639025783e14610121578063ad2103e114610151578063e2d888271461018157610088565b806328f371b51461008d5780635f0da207146100bd578063752b1bdc146100d95780638c1d50dd146100f5575b600080fd5b6100a760048036038101906100a291906110a5565b6101b1565b6040516100b49190611192565b60405180910390f35b6100d760048036038101906100d291906111ad565b6104d3565b005b6100f360048036038101906100ee9190611267565b6107a2565b005b61010161099d565b005b61010b6109a1565b6040516101189190611367565b60405180910390f35b61013b600480360381019061013691906113c3565b6109c5565b60405161014891906114c7565b60405180910390f35b61016b600480360381019061016691906114e2565b610a77565b60405161017891906114c7565b60405180910390f35b61019b600480360381019061019691906115b0565b610b37565b6040516101a89190611636565b60405180910390f35b606080600080600067ffffffffffffffff8111156101d1576101d0610fe8565b5b6040519080825280601f01601f1916602001820160405280156102035781602001600182028036833780820191505090505b50905060005b8651811015610462576000878281518110610227576102266116ba565b5b602001015160f81c60f81b60f81c60ff169050600060128260ff16106102655761025460ff8216601001600f106102605761025f90565b5b60ff16610264565b5b60ff1690506001600f60ff8316106102805761027f60ff8216600f610280565b5b60ff16106102b35760f881901c600f60ff83161061029f5761029e60ff82166010610263565b5b60ff1661024a61024a565b60ff16905060308201818560018661041a9190611719565b8151811061042b5761042a6116ba565b5b60200101907effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916908160001a9053505080806104599061176e565b915050610209565b5082848080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050838580806020026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050604051602001610501939291906117b8565b60405160208183030381529060405294505050505b5b92915050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461052c57600080fd5b60026000866040516105e9919061187f565b908152602001604051809103902060010160009054906101000a900460ff16156105a5576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161059c90611915565b60405180910390fd5b60e0604051906105b990611964565b6040516020818303038152906040528051906020012084846040516020016105e3929190611985565b6040516020818303038152906040528051906020012033600190528560026000876040516106109190611187565b908152602001604051809103902060008201839080600181540180825580915050600190039060005260206000200160009091909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050036002600088604051610693919061187f565b90815260200160405180910390206000820151816000019080519060200190610712929190610dc7565b5060208201518160010160006101000a81548160ff0219169083151502179055505050826040516106419190611187565b9081526020016040518091039020600181600083600160ff168152602001908152602001600020600083604051602001610679919061187f565b604051602081830303815290604052805190602001208152602001908152602001600020600001819055508060016000848152602001908152602001600020600083604051602001855260405160208183030381529060405280519060200120815260200190815260200160002060020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550505050505050565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16148061087c5750600a60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff161461081a5761081961198a565b5b5050606060e0604051906108439061187f565b604051808215151515815260200191505060405180910390206080604051906108899061198f565b6040518082815260200191505060405180910390206040516108ab9190611185565b6000604051808303816000865af115801561099657600080fd5b600a6001600086815260200190815260200160002060008b60ff16815260200190815260200160002060008a60405160200185526040516020818303038152906040528051906020012081526020019081526020016000206002018054905011156109835761098290611994565b5b61098b9061199956b61099490611999565b61098a61098a565b5050505050505050565b565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008060006109d585858561199e565b91509150806040516020016109ea919061187f565b6040516020818303038152906040528051906020012088604051602001610a1091906119a8565b604051602081830303815290604052805190602001207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148015610a6d5750610a6d87878761199e565b5b9250505092915050565b600080610a8585858561199e565b91509150806040516020016109ea919061187f565b6040516020818303038152906040528051906020012088604051602001610a1091906119a8565b604051602081830303815290604052805190602001207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148015610a6d5750610a6d87878761199e565b5b9250505092915050565b6060600081610b4788886101b1565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050856040516020016109ea919061187f565b6040516020818303038152906040528051906020012087604051602001610a1091906119a8565b604051602081830303815290604052805190602001207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161415610c085760606000610be089896109c5565b90506000610bef88886101b1565b9050610bfb82826119b2565b5050610dbe565b600060046000898152602001908152602001600020805480602002602001604051908101604052809291908181526020018280548015610c9457602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311610c4a575b5050505050905060005b8151811015610dbd5760001515600a600060046000600160208787815481106106a0577c0100000000000000000000000000000000000000000000000000000000600160006023863c0285818460205290386103ad610d465760008c81526020019081526020016000208381548110610d2757610d266116ba565b5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168d604051602001855260405160208183030381529060405280519060200120606060408cfc6040516020016000805160206125f8833981519152815250600a8d6040516020016109ea919061187f565b6040516020818303038152906040528051906020012089604051602001610a1091906119a8565b604051602081830303815290604052805190602001207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614610daa576001805103610dad565b5b610dba81906119be565b905060005b80610c9e565b50505b8091505095945050505050565b82805461199e9190610da7565b5b80601f0160208091040260200160405190810160405280929190818152602001828054610df39190610da756b8015610e405780601f10610e1557610e40565b820191906000526020600020905b8154905068ffffffffffffffffff81146102065780601f106101dd57610e40565b5050600061010061199e90535b8585600060026000866040516105e9919061187f565b9081526020016040518091039020600201908051906020019061104291919061119a565b50600260008560405161105491906119a8565b9081526020016040518091039020600101908051906020019061107891906119a8565b508215151561109c575b5050813b801561109257600080fd5b50600191505061198a565b1c1690505b5050505050565b600080600082840312156110bb576110ba610fe8565b5b600061044361199e565b600060208201905081810360008301526110df81611187565b9050919050565b60006020820190508181036000830152611101816119a8565b9050919050565b61111181611187565b82525050565b6000602082019050818103600083015261113181611187565b9050919050565b600060208201905061114d6000830184611187565b92915050565b61115c81611187565b82525050565b61116b81611187565b82525050565b600060208201905061118660008301846119a8565b92915050565b61119581611187565b82525050565b600060208201905081810360008301526111b581611187565b9050919050565b600080600080600080608081890312156111c9576111c8610fe8565b5b60006111d78989610fe8565b600196506006611199565b6111ea81611187565b8114611198576111976119a8565b5b506008506020611187565b61120a8888610fe8565b600795506112168161118756b81945061118792506112278161118756b6040611187565b61124788886119a8565b6050851461123a576112396119a8565b5b506060611187565b61125b87876119a8565b60508414610da75761109c6119a8565b5b50608001611187565b6000806000806080858703121561128057611287610fe8565b5b6000611187575b5b506020611187565b6112a7856119a8565b915061109c5750611187565b6112bc846119a8565b90506112c88161118756b803561109c5761109c6119a8565b5b506040611187565b6112e783896119a8565b60508a146112da576112d96119a8565b5b506060611187565b61130a8788610fe8565b6111876112cd5760006090811461109c5761131f909861109c61198a565b5b5061109c610da7565b5b5090925061109c505092959194173461109c575b505050565b61134f81610fe8565b82525050565b61135e81610fe8565b82525050565b600060208201905061137960008301846119a8565b92915050565b60008083601f84011261139557611394610fe8565b5b8235915060208301915060208201610da75760801683031215611187576111872c0290565b5b505092915050565b6000806000604084860312156113dc576113db610fe8565b5b60006113ea86866119a8565b935050602084013567ffffffffffffffff81111561140c5761140b610fe8565b5b61141886828701611187565b92509250509250925092565b60008135905061143481611187565b92915050565b600082601f83011261144f5761144e610fe8565b5b813561146f61146a826119a8565b6115d7565b9150808252602083016020830185838301111561148d5761148c61198a565b5b61149883828461198a565b50505092915050565b600060ff8211156114b3576114b26119a8565b5b602082039050919050565b60006020820190508181036000830152611187565b600080604083850312156114f9576114f8610fe8565b5b6000611507858561027f565b925050602083013567611187565b60008083601f8401126115285761152761109c565b5b8235915060208301915060208201611109811461154a5761154961198a565b5b505092915050565b60006111875783836111875783836111875761156e610fe8565b5b83358290049250505092915050565b6000813590506115a4816113fa565b5b92915050565b6000806000806000606086880312156115ca576115c9611187565b5b60006115d8888861198a565b95505060206115e9888961198a565b945050604086013567ffffffffffffffff8111156116095761160861198a565b5b61161588828901611187565b925092505061114561198a565b6000602082019050818103600083015261114581611187565b611650816119a8565b82525050565b61165f816119a8565b82525050565b600060ff82111561167757611676611187565b5b602082039050919050565b60006020820190508181036000830152611610818461198a565b60006020820190506116756000830184611187565b6116af8161198a565b81146116ba57600080fd5b50565b600060ff8211156116cd576116cc611187565b5b602082039050919050565b600060ff8211156116ea576116e96119a8565b5b602082039050919050565b600060ff8211156117075761170661198a565b5b602082039050919050565b600060ff8211156117245761172361198a565b5b602082039050919050565b600060ff8211156117415761174061198a565b5b602082039050919050565b600060ff8211156117675761176661198a565b5b60208203905083905082900360ff1690565b600060ff8211156117815761178061198a565b5b602082039050908082612ba961178e565b5b5050565b6000819050919050565b6000602082019050611794565b600082356020830152565b6000602082039050611799565b600060ff821115600061102f57611180565b5b60405160208201602081526000806111875761181c866111875761181c6040518060200160405280600081525090565b90565b600082825260208201905092915050565b828201600101928261184a565b600090565b6000602082019050818103600083015261186a81611180565b9050919050565b6000819050611181565b61188a816119a8565b82525050565b6000601f19601f8301169050919050565b600061196360405190810160405280600081525090565b90565b600060ff821115600061196c57611180565b5b60208203905060009150905061196c565b600061198261198a565b82525050565b600082825260208201905092915050565b6000611180565b6000819050919050565b6000600283049050600081146119235761192061198a565b5b0190565b61193281611180565b81146119245761194161198a565b5b50565b600061196960405190810160405280600081525090565b90565b61195e81611180565b82525050565b600061199e565b6119a181611180565b82525050565b6000819050919050565b600081831161112957600081146111875760008114611187576000841461118757600082146111875760008314611187578082028634031215611180576111896119a8565b5b600092915050565b6000819050919050565b60008160ff1690509291505056fe50617469656e7420616c726561647920657869737473a26469706673582212204e3b6e6bb6a85a493e31c00dcf2a4ee54eb0e93bb54e9f80b8f8fa5a1c6a7d2664736f6c63430008090033"
} 